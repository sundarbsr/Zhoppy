import{scheduleDestroyed as t,scheduleDestroy as e}from"@glimmer/global-context";let r,n,l=new WeakMap;function u(t,e){return null===t?e:Array.isArray(t)?(t.push(e),t):[t,e]}function i(t,e){Array.isArray(t)?t.forEach(e):null!==t&&e(t)}function s(t,e){if(Array.isArray(t)&&t.length>1){let r=t.indexOf(e);return t.splice(r,1),t}return null}function c(t){let e=l.get(t);return void 0===e&&(e={parents:null,children:null,eagerDestructors:null,destructors:null,state:0},l.set(t,e)),e}function o(t,e){let r=c(t),n=c(e);return r.children=u(r.children,e),n.parents=u(n.parents,t),e}function a(t,e,r=!1){let n=c(t),l=r?"eagerDestructors":"destructors";return n[l]=u(n[l],e),e}function f(t,e,r=!1){let n=c(t),l=r?"eagerDestructors":"destructors";n[l]=s(n[l],e)}function d(r){let n=c(r);if(n.state>=1)return;let{parents:l,children:u,eagerDestructors:o,destructors:a}=n;n.state=1,i(u,d),i(o,(t=>{t(r)})),i(a,(t=>{e(r,t)})),t((()=>{i(l,(t=>{!function(t,e){let r=c(e);0===r.state&&(r.children=s(r.children,t))}(r,t)})),n.state=2}))}function g(t){let{children:e}=c(t);i(e,d)}function h(t){let e=l.get(t);return void 0!==e&&null!==e.children}function p(t){let e=l.get(t);return void 0!==e&&e.state>=1}function y(t){let e=l.get(t);return void 0!==e&&e.state>=2}export{h as _hasDestroyableChildren,n as assertDestroyablesDestroyed,o as associateDestroyableChild,d as destroy,g as destroyChildren,r as enableDestroyableTracking,y as isDestroyed,p as isDestroying,a as registerDestructor,f as unregisterDestructor};
//# sourceMappingURL=index.js.map
